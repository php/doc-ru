<?xml version="1.0" encoding="utf-8"?>
<!-- EN-Revision: c7aca484fd1d7eaccd03f0e011f858fa93d105b9 Maintainer: mch Status: ready -->
<!-- $Revision: $ -->
<!-- Reviewed: no -->
<sect1 xml:id="control-structures.for" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 <title><literal>for</literal></title>
 <?phpdoc print-version-for="for"?>
 <para>
  Цикл <literal>for</literal> самый сложный цикл в PHP.
Он ведет себя так же как его аналог в языке C. Синтаксис цикла
  <literal>for</literal> следующий:
  <informalexample>
   <programlisting>
<![CDATA[
for (expr1; expr2; expr3)
    statement
]]>
   </programlisting>
  </informalexample>
 </para>
 <simpara>
  Первое выражение (<varname>expr1</varname>)
  всегда вычисляется (выполняется) только один раз в начале 
  цикла.
 </simpara>
 <simpara>
  В начале каждой итерации оценивается выражение
  <varname>expr2</varname>. Если оно принимает значение
  &true;, то цикл продолжается, и вложенные операторы
  будут выполнены.  Если оно принимает значение 
  &false;, выполнение цикла заканчивается.
 </simpara>
 <simpara>
  В конце каждой итерации выражение <varname>expr3</varname>
  вычисляется (выполняется ).
 </simpara>
 <simpara>
  Каждое из выражений может быть пустым или содержать несколько 
  выражений, разделенных запятыми. В <varname>expr2</varname> все
  выражения, разделенные запятыми, вычисляются, но результат берется из
  последнего.
  Если выражение <varname>expr2</varname> отсутствует, это означает, что цикл
  будет выполняться бесконечно. (PHP неявно воспринимает это значение как
  &true;, также, как в языке C). Это может быть не столь бесполезно, сколь вы
  могли подумать, так как часто необходимо прервать цикл, используя
  условный оператор <link
  linkend="control-structures.break"><literal>break</literal></link>
  вместо использования выражения в цикле <literal>for</literal>,
  которое принимает истинное значение.
 </simpara>
 <para>
  Рассмотрим следующие примеры. Все из них отображают числа
  от 1 до 10:
  <informalexample>
   <programlisting role="php">
<![CDATA[
<?php
/* пример 1 */

for ($i = 1; $i <= 10; $i++) {
    echo $i;
}

/* пример 2 */

for ($i = 1; ; $i++) {
    if ($i > 10) {
        break;
    }
    echo $i;
}

/* пример 3 */

$i = 1;
for (; ; ) {
    if ($i > 10) {
        break;
    }
    echo $i;
    $i++;
}

/* пример 4 */

for ($i = 1, $j = 0; $i <= 10; $j += $i, print $i, $i++);
?>
]]>
   </programlisting>
  </informalexample>
 </para>
 <simpara>
  Конечно, первый пример кажется самым хорошим (или, возможно,
  четвертый), но вы можете обнаружить, что возможность использовать пустые
  выражения в циклах <literal>for</literal> может стать удобной во многих
  случаях.
 </simpara>
 <para>
  PHP также поддерживает альтернативный синтаксис с двоеточием для циклов
  <literal>for</literal>.
  <informalexample>
   <programlisting>
<![CDATA[
for (expr1; expr2; expr3):
    statement
    ...
endfor;
]]>
   </programlisting>
  </informalexample>
 </para>
 <simpara>
  Перебор массивов как показано ниже - это обычное дело для
  многих пользователей.
 </simpara>
 <para>
  <informalexample>
   <programlisting role="php">
<![CDATA[
<?php
/*
* Это массив с некоторыми данными, которые мы хотим изменить
* при работе цикла.
*/
$people = Array(
        Array('name' => 'Kalle', 'salt' => 856412),
        Array('name' => 'Pierre', 'salt' => 215863)
        );

for($i = 0; $i < sizeof($people); ++$i)
{
    $people[$i]['salt'] = rand(000000, 999999);
}
?>
]]>
   </programlisting>
  </informalexample>
 </para>
 <simpara>
  Проблема заключается во втором выражении. Этот код может быть
  медленным, так как он должен вычислять размер массива в каждой итерации.
  Так как размер массива не меняется, код может быть легко оптимизирован,
  используя промежуточную переменную для хранения размера и применяя
  ее в цикле вместо оператора sizeof. Пример ниже это иллюстрирует:
 </simpara>
 <para>
  <informalexample>
   <programlisting role="php">
<![CDATA[
<?php
$people = Array(
        Array('name' => 'Kalle', 'salt' => 856412),
        Array('name' => 'Pierre', 'salt' => 215863)
        );

for($i = 0, $size = sizeof($people); $i < $size; ++$i)
{
    $people[$i]['salt'] = rand(000000, 999999);
}
?>
]]>
   </programlisting>
  </informalexample>
 </para>
</sect1>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
