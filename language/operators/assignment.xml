<?xml version="1.0" encoding="utf-8"?>
<!-- Reviewed: no -->
<sect1 xml:id="language.operators.assignment">
 <title>Оператор присваивания</title>
 <simpara>
  Базовый оператор присваивания обозначается как "=". На первый взгляд
  может показаться, что это оператор "равно". На самом деле это не так.
  В действительности оператор присваивания означает, что левый операнд
  получает значение правого выражения, (то есть устанавливается значением).
 </simpara>
 <para>
  Результатом выполнения оператора присваивания является само присвоенное значение.
  Таким образом, результат выполнения "<literal>$a = 3</literal>" будет равен
  3. Это позволяет делать трюки наподобие:
  <informalexample>
  <programlisting role="php">
<![CDATA[
<?php
$a = ($b = 4) + 5; // $a теперь равно 9, а $b было присвоено 4.
?>
]]>
  </programlisting>
  </informalexample>
 </para>
 <para>
  В дополнение к базовому оператору присваивания имеются «комбинированные операторы»
  для всех <link linkend="language.operators">бинарных арифметических</link> операций,
  операций объединения массивов и строковых операций, которые позволяют
  использовать некоторое значение в выражении, а затем установить его как
  результат данного выражения. Например:
  <informalexample>
  <programlisting role="php">
<![CDATA[
<?php
$a = 3;
$a += 5; // устанавливает $a в 8, как если бы мы написали: $a = $a + 5;
$b = "Привет";
$b .= "-привет!"; // устанавливает $b в "Привет-привет!", как и $b = $b . "-привет!";
?>
]]>
  </programlisting>
  </informalexample>
 </para>
 <para>
  Обратите внимание, что присвоение копирует оригинальную переменную в новую
  (присвоение по значению), таким образом все последующие изменения
  одной из переменных никак не отразятся на другой. Это также следует учитывать,
  если вам надо скопировать что-то типа большого массива в длинном цикле.
 </para>
 <para>
  Исключением из обычного для PHP способа присваивания по значению являются объекты
  (<type>object</type>), которые присваиваются по ссылке.
  Принудительно скопировать объекты по значению можно с помощью
  специального ключевого слова <link linkend="language.oop5.cloning">clone</link>.
 </para>

 <sect2 xml:id="language.operators.assignment.reference">
  <title>Присваивание по ссылке</title>
  <para>
  Присваивание по ссылке также поддерживается, для него используется синтаксис
  <computeroutput>$var = &amp;$othervar;</computeroutput>.
  Присваивание по ссылке означает, что обе переменные указывают на
  одни и те же данные и никакого копирования не происходит.
  </para>
  <para>
  <example>
   <title>Присваивание по ссылке</title>
   <programlisting role="php">
<![CDATA[
<?php
$a = 3;
$b = &$a; // $b - это ссылка на $a
print "$a\n"; // печатает 3
print "$b\n"; // печатает 3
$a = 4; // меняем $a
print "$a\n"; // печатает 4
print "$b\n"; // также печатает 4, так как $b является ссылкой на $a,
       // а значение переменной $a успело измениться
?>
]]>
   </programlisting>
  </example>
  </para>
  <para>
  Оператор <link linkend="language.oop5.basic.new">new</link>
  автоматически возвращает ссылку, поэтому присвоение результата операции
  <link linkend="language.oop5.basic.new">new</link> по ссылке является ошибкой.
  </para>
  <para>
  <informalexample>
   <programlisting role="php">
<![CDATA[
<?php
class C {}
$o = &new C;
?>
]]>
   </programlisting>
   &example.outputs;
   <screen>
<![CDATA[
Parse error: syntax error, unexpected 'new' (T_NEW) in …
]]>
   </screen>
  </informalexample>
  </para>
  <para>
  Для получения более полной информации о ссылках и их возможностях обратитесь к
  разделу <link linkend="language.references">Подробно о ссылках</link>.
  </para>
 </sect2>

 <sect2 xml:id="language.operators.assignment.arithmetic">
  <title>Операторы арифметического присваивания</title>
  <informaltable>
  <tgroup cols="3">
   <thead>
   <row>
    <entry>Пример</entry>
    <entry>Эквивалент</entry>
    <entry>Операция</entry>
   </row>
   </thead>
   <tbody>
   <row>
    <entry>$a += $b</entry>
    <entry>$a = $a + $b</entry>
    <entry>Сложение</entry>
   </row>
   <row>
    <entry>$a -= $b</entry>
    <entry>$a = $a - $b</entry>
    <entry>Вычитание</entry>
   </row>
   <row>
    <entry>$a *= $b</entry>
    <entry>$a = $a * $b</entry>
    <entry>Умножение</entry>
   </row>
   <row>
    <entry>$a /= $b</entry>
    <entry>$a = $a / $b</entry>
    <entry>Деление</entry>
   </row>
   <row>
    <entry>$a %= $b</entry>
    <entry>$a = $a % $b</entry>
    <entry>Модуль</entry>
   </row>
   <row>
    <entry>$a **= $b</entry>
    <entry>$a = $a ** $b</entry>
    <entry>Возведение в степень</entry>
   </row>
   </tbody>
  </tgroup>
  </informaltable>
 </sect2>

 <sect2 xml:id="language.operators.assignment.bitwise">
  <title>Операторы побитового присваивания</title>
  <informaltable>
  <tgroup cols="3">
   <thead>
   <row>
    <entry>Пример</entry>
    <entry>Эквивалент</entry>
    <entry>Операция</entry>
   </row>
   </thead>
   <tbody>
   <row>
    <entry>$a &amp;= $b</entry>
    <entry>$a = $a &amp; $b</entry>
    <entry>Побитовое И</entry>
   </row>
   <row>
    <entry>$a |= $b</entry>
    <entry>$a = $a | $b</entry>
    <entry>Побитовое ИЛИ</entry>
   </row>
   <row>
    <entry>$a ^= $b</entry>
    <entry>$a = $a ^ $b</entry>
    <entry>Побитовое исключающее ИЛИ (Xor)</entry>
   </row>
   <row>
    <entry>$a &lt;&lt;= $b</entry>
    <entry>$a = $a &lt;&lt; $b</entry>
    <entry>Побитовый сдвиг влево</entry>
   </row>
   <row>
    <entry>$a &gt;&gt;= $b</entry>
    <entry>$a = $a &gt;&gt; $b</entry>
    <entry>Побитовый сдвиг вправо</entry>
   </row>
   </tbody>
  </tgroup>
  </informaltable>
 </sect2>

 <sect2 xml:id="language.operators.assignment.other">
  <title>Другие операторы присваивания</title>
  <informaltable>
  <tgroup cols="3">
   <thead>
   <row>
    <entry>Пример</entry>
    <entry>Эквивалент</entry>
    <entry>Операция</entry>
   </row>
   </thead>
   <tbody>
   <row>
    <entry>$a .= $b</entry>
    <entry>$a = $a . $b</entry>
    <entry>Конкатенация строк</entry>
   </row>
   <row>
    <entry>$a ??= $b</entry>
    <entry>$a = $a ?? $b</entry>
    <entry>Объединение с Null</entry>
   </row>
   </tbody>
  </tgroup>
  </informaltable>
 </sect2>

 <sect2 role="seealso" xml:id="language.operators.assignment.see-also">
  &reftitle.seealso;
  <para>
  <simplelist>
   <member><link linkend="language.operators.arithmetic">арифметические операторы</link></member>
   <member><link linkend="language.operators.bitwise">побитовые операторы</link></member>
   <member><link linkend="language.operators.comparison.coalesce">операторы объединения с null</link></member>
  </simplelist>
  </para>
 </sect2>
</sect1>
