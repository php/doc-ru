<?xml version="1.0" encoding="utf-8"?>
<!-- EN-Revision: 2def8c3cfec11fcc74f153b337301bbc06c16bc9 Maintainer: sergey Status: ready -->
<!-- Reviewed: no -->
<sect1 xml:id="migration85.deprecated">
 <title>Устаревшая функциональность</title>

 <sect2 xml:id="migration85.deprecated.core">
  <title>Ядро PHP</title>

  <sect3 xml:id="migration85.deprecated.core.changes-to-user-output-handler">
   <title>Изменения в обработчике вывода пользователя</title>

   <simpara>
    Попытка вывода результатов (например, с помощью функции <function>echo</function>)
    в рамках обработчика вывода пользователя объявлена устаревшей.
    Предупреждение об устаревании будет игнорировать обработчик, производящий вывод,
    чтобы обеспечить его видимость;
    если есть вложенные обработчики вывода, следующий из них всё равно будет использоваться.
   </simpara>

  </sect3>

  <sect3 xml:id="migration85.deprecated.core.non-canonical-cast-names">
   <title>Неканонические названия типов</title>

   <simpara>
    Неканонические имена типов <literal>(boolean)</literal>,
    <literal>(integer)</literal>, <literal>(double)</literal>,
    и <literal>(binary)</literal> объявлены устаревшими,
    используйте вместо них <literal>(bool)</literal>, <literal>(int)</literal>,
    <literal>(float)</literal> и <literal>(string)</literal> соответственно.
   </simpara>

  </sect3>

  <sect3 xml:id="migration85.deprecated.core.case-statements-with-semicolon">
   <title>Завершение операторов case точкой с запятой</title>

   <simpara>
    Завершение операторов case точкой с запятой вместо двоеточия больше не поддерживается.
   </simpara>

  </sect3>

  <sect3 xml:id="migration85.deprecated.core.the-backtick-operator">
   <title>Операторы выполнения</title>

   <simpara>
    <link linkend="language.operators.execution">Обратный машинописный апостроф</link>
    как псевдоним функции <function>shell_exec</function> больше не поддерживается.
   </simpara>

  </sect3>

  <sect3 xml:id="migration85.deprecated.core.return-null-from-debuginfo">
   <title>Возвращение null функцией __debugInfo()</title>

   <simpara>
    Возвращение &null; функцией
    <link linkend="language.oop5.magic.debuginfo">__debugInfo()</link>
    больше не поддерживается. Вместо этого возвращается пустой массив.
   </simpara>

  </sect3>

  <sect3 xml:id="migration85.deprecated.core.return-memleaks-ini-directive">
   <title>INI-настройка report_memleaks</title>

   <simpara>
    INI-настройка <link linkend="ini.report-memleaks">report_memleaks</link> объявлена устаревшей.
   </simpara>

  </sect3>

  <sect3 xml:id="migration85.deprecated.core.constant-redeclaration">
   <title>Повторное объявление констант</title>

   <simpara>
    Повторное объявление констант объявлено устаревшим.
    Обратите внимание, что это уже вызвало предупреждение и будет вызывать его и в дальнейшем.
   </simpara>

  </sect3>

  <sect3 xml:id="migration85.deprecated.core.closure-binding-issues">
   <title>Проблемы со связыванием замыканий</title>

   <para>
    Следующие проблемы с привязкой замыкания,
    которые уже выдают ошибку уровня <constant>E_WARNING</constant>,
    теперь считаются устаревшими:

    <simplelist>
     <member>Привязка экземпляра к статическому замыканию.</member>
     <member>Связывание методов с объектами, которые не являются экземплярами класса (или подкласса), в котором метод определен.</member>
     <member>Отвязывание $this от метода.</member>
     <member>Отвязывание $this от замыкания, которое использует `$this`.</member>
     <member>Привязка замыкания к области действия внутреннего класса.</member>
     <member>Перепривязывание области действия замыкания, созданного функцией или методом.</member>
    </simplelist>
   </para>

  </sect3>

  <sect3 xml:id="migration85.deprecated.core.sleep-and-wakeup-magic-methods">
   <title>Магические методы __sleep() и __wakeup()</title>

   <simpara>
    Магические методы <link linkend="object.sleep">__sleep()</link> и <link linkend="object.wakeup">__wakeup()</link>
    были мягко объявлены устаревшими.
    Вместо них следует использовать магические методы <link linkend="object.serialize">__serialize()</link>
    и <link linkend="object.unserialize">__unserialize()</link>,
    либо использовать их одновременно, если требуется совместимость с PHP 7.
   </simpara>

  </sect3>

  <sect3 xml:id="migration85.deprecated.core.using-null-as-an-array-offset">
   <title>Использование null в качестве смещения массива</title>

   <simpara>
    Использование &null; в качестве смещения массива или при вызове <function>array_key_exists</function>
    объявлено устаревшим. Вместо этого следует использовать пустую строку.
   </simpara>

  </sect3>

  <sect3 xml:id="migration85.deprecated.core.incrementing-non-numeric-strings">
   <title>Увеличение нечисловых строк</title>

   <simpara>
    Увеличение нечисловых строк объявлено устаревшим.
    Вместо этого следует использовать функцию <function>str_increment</function>.
   </simpara>

  </sect3>

  <sect3 xml:id="migration85.deprecated.core.register-argc-argv-directive">
   <title>INI-настройка register_argc_argv</title>

   <simpara>
    Извлечение <code>$_SERVER['argc']</code> и <code>$_SERVER['argv']</code>
    из строки запроса для не-CLI SAPIs больше не поддерживается.
    Настройте <literal>register_argc_argv=0</literal> и переключитесь
    на <varname>$_GET</varname> или <code>$_SERVER['QUERY_STRING']</code>
    для доступа к информации после проверки безопасности использования.
   </simpara>

  </sect3>

 </sect2>

 <sect2 xml:id="migration85.deprecated.curl">
  <title>Модуль cURL</title>

  <simpara>
   Функция <function>curl_close</function> устарела,
   поскольку объекты <classname>CurlHandle</classname> освобождаются автоматически.
  </simpara>

  <simpara>
   Функция <function>curl_share_close</function> устарела,
   поскольку объекты <classname>CurlShareHandle</classname> освобождаются автоматически.
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.deprecated.date">
  <title>Модуль работы с датой и временем</title>

  <simpara>
   Константы <constant>DATE_RFC7231</constant> и
   <constant>DateTimeInterface::RFC7231</constant> устарели.
   Это связано с тем, что связанный с ними часовой пояс игнорируется и всегда используется GMT.
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.deprecated.fileinfo">
  <title>Модуль FileInfo</title>

  <simpara>
   Функция <function>finfo_close</function> устарела,
   поскольку объекты <classname>finfo</classname> освобождаются автоматически.
  </simpara>

  <simpara>
   Параметр <parameter>$context</parameter> функции <function>finfo_buffer</function> устарел,
   так как игнорируется.
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.deprecated.gd">
  <title>Модуль GD</title>

  <simpara>
   Функция <function>imagedestroy</function> устарела,
   поскольку объекты <classname>GdImage</classname> освобождаются автоматически.
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.deprecated.hash">
  <title>Фреймворк HASH</title>

  <simpara>
   Константы <constant>MHASH_<replaceable>*</replaceable></constant> устарели.
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.deprecated.intl">
  <title>Модуль интернационализации</title>

  <simpara>
   INI-настройка <link linkend="ini.intl.error-level">intl.error_level</link> устарела.
   Ошибки следует проверять вручную или включить исключения с помощью INI-настройки
   <link linkend="ini.intl.use-exceptions">intl.use_exceptions</link>.
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.deprecated.ldap">
  <title>Модуль LDAP</title>

  <para>
   Определённые вызовы и константы Oracle Instant Client устарели.

   Список затронутых вызовов:
   <simplelist>
    <member><function>ldap_connect</function> с поддержкой wallet</member>
    <member><function>ldap_connect_wallet</function></member>
   </simplelist>

   Список затронутых констант:
   <simplelist>
    <member><constant>GSLC_SSL_NO_UATH</constant></member>
    <member><constant>GSLC_SSL_ONEWAY_UATH</constant></member>
    <member><constant>GSLC_SSL_TWOWAY_UATH</constant></member>
   </simplelist>
  </para>

 </sect2>

 <sect2 xml:id="migration85.deprecated.mysqli">
  <title>Модуль MySQLi</title>

  <simpara>
   Функция-псевдоним <function>mysqli_execute</function> устарела.
   Вместо неё используйте функцию <function>mysqli_stmt_execute</function>.
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.deprecated.openssl">
  <title>Модуль OpenSSL</title>

  <simpara>
   Параметр <parameter>$key_length</parameter> функции <function>openssl_pkey_derive</function> устарел.
   Это связано с тем, что он либо игнорируется, либо обрезает ключ,
   что может представлять угрозу безопасности.
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.deprecated.pdo">
  <title>Модуль PDO</title>

  <simpara>
   Схема DSN <literal>"uri:"</literal> объявлена устаревшей из-за проблем безопасности,
   связанных с DSN, поступающими из удалённых URI.
  </simpara>

  <para>
   Константы, специфичные для драйвера, в классе PDO объявлены устаревшими.
   Список затронутых констант и их замены:

   <simplelist>
    <member><constant>PDO::DBLIB_ATTR_CONNECTION_TIMEOUT</constant> => <constant>Pdo\Dblib::ATTR_CONNECTION_TIMEOUT</constant></member>
    <member><constant>PDO::DBLIB_ATTR_QUERY_TIMEOUT</constant> => <constant>Pdo\Dblib::ATTR_QUERY_TIMEOUT</constant></member>
    <member><constant>PDO::DBLIB_ATTR_STRINGIFY_UNIQUEIDENTIFIER</constant> => <constant>Pdo\Dblib::ATTR_STRINGIFY_UNIQUEIDENTIFIER</constant></member>
    <member><constant>PDO::DBLIB_ATTR_VERSION</constant> => <constant>Pdo\Dblib::ATTR_VERSION</constant></member>
    <member><constant>PDO::DBLIB_ATTR_TDS_VERSION</constant> => <constant>Pdo\Dblib::ATTR_TDS_VERSION</constant></member>
    <member><constant>PDO::DBLIB_ATTR_SKIP_EMPTY_ROWSETS</constant> => <constant>Pdo\Dblib::ATTR_SKIP_EMPTY_ROWSETS</constant></member>
    <member><constant>PDO::DBLIB_ATTR_DATETIME_CONVERT</constant> => <constant>Pdo\Dblib::ATTR_DATETIME_CONVERT</constant></member>
    <member><constant>PDO::FB_ATTR_DATE_FORMAT</constant> => <constant>Pdo\Firebird::ATTR_DATE_FORMAT</constant></member>
    <member><constant>PDO::FB_ATTR_TIME_FORMAT</constant> => <constant>Pdo\Firebird::ATTR_TIME_FORMAT</constant></member>
    <member><constant>PDO::FB_ATTR_TIMESTAMP_FORMAT</constant> => <constant>Pdo\Firebird::ATTR_TIMESTAMP_FORMAT</constant></member>
    <member><constant>PDO::MYSQL_ATTR_USE_BUFFERED_QUERY</constant> => <constant>Pdo\Mysql::ATTR_USE_BUFFERED_QUERY</constant></member>
    <member><constant>PDO::MYSQL_ATTR_LOCAL_INFILE</constant> => <constant>Pdo\Mysql::ATTR_LOCAL_INFILE</constant></member>
    <member><constant>PDO::MYSQL_ATTR_LOCAL_INFILE_DIRECTORY</constant> => <constant>Pdo\Mysql::ATTR_LOCAL_INFILE_DIRECTORY</constant></member>
    <member><constant>PDO::MYSQL_ATTR_INIT_COMMAND</constant> => <constant>Pdo\Mysql::ATTR_INIT_COMMAND</constant></member>
    <member><constant>PDO::MYSQL_ATTR_MAX_BUFFER_SIZE</constant> => <constant>Pdo\Mysql::ATTR_MAX_BUFFER_SIZE</constant></member>
    <member><constant>PDO::MYSQL_ATTR_READ_DEFAULT_FILE</constant> => <constant>Pdo\Mysql::ATTR_READ_DEFAULT_FILE</constant></member>
    <member><constant>PDO::MYSQL_ATTR_READ_DEFAULT_GROUP</constant> => <constant>Pdo\Mysql::ATTR_READ_DEFAULT_GROUP</constant></member>
    <member><constant>PDO::MYSQL_ATTR_COMPRESS</constant> => <constant>Pdo\Mysql::ATTR_COMPRESS</constant></member>
    <member><constant>PDO::MYSQL_ATTR_DIRECT_QUERY</constant> => <constant>Pdo\Mysql::ATTR_DIRECT_QUERY</constant></member>
    <member><constant>PDO::MYSQL_ATTR_FOUND_ROWS</constant> => <constant>Pdo\Mysql::ATTR_FOUND_ROWS</constant></member>
    <member><constant>PDO::MYSQL_ATTR_IGNORE_SPACE</constant> => <constant>Pdo\Mysql::ATTR_IGNORE_SPACE</constant></member>
    <member><constant>PDO::MYSQL_ATTR_SSL_KEY</constant> => <constant>Pdo\Mysql::ATTR_SSL_KEY</constant></member>
    <member><constant>PDO::MYSQL_ATTR_SSL_CERT</constant> => <constant>Pdo\Mysql::ATTR_SSL_CERT</constant></member>
    <member><constant>PDO::MYSQL_ATTR_SSL_CA</constant> => <constant>Pdo\Mysql::ATTR_SSL_CA</constant></member>
    <member><constant>PDO::MYSQL_ATTR_SSL_CAPATH</constant> => <constant>Pdo\Mysql::ATTR_SSL_CAPATH</constant></member>
    <member><constant>PDO::MYSQL_ATTR_SSL_CIPHER</constant> => <constant>Pdo\Mysql::ATTR_SSL_CIPHER</constant></member>
    <member><constant>PDO::MYSQL_ATTR_SSL_VERIFY_SERVER_CERT</constant> => <constant>Pdo\Mysql::ATTR_SSL_VERIFY_SERVER_CERT</constant></member>
    <member><constant>PDO::MYSQL_ATTR_SERVER_PUBLIC_KEY</constant> => <constant>Pdo\Mysql::ATTR_SERVER_PUBLIC_KEY</constant></member>
    <member><constant>PDO::MYSQL_ATTR_MULTI_STATEMENTS</constant> => <constant>Pdo\Mysql::ATTR_MULTI_STATEMENTS</constant></member>
    <member><constant>PDO::ODBC_ATTR_USE_CURSOR_LIBRARY</constant> => <constant>Pdo\Odbc::ATTR_USE_CURSOR_LIBRARY</constant></member>
    <member><constant>PDO::ODBC_ATTR_ASSUME_UTF8</constant> => <constant>Pdo\Odbc::ATTR_ASSUME_UTF8</constant></member>
    <member><constant>PDO::ODBC_SQL_USE_IF_NEEDED</constant> => <constant>Pdo\Odbc::SQL_USE_IF_NEEDED</constant></member>
    <member><constant>PDO::ODBC_SQL_USE_DRIVER</constant> => <constant>Pdo\Odbc::SQL_USE_DRIVER</constant></member>
    <member><constant>PDO::ODBC_SQL_USE_ODBC</constant> => <constant>Pdo\Odbc::SQL_USE_ODBC</constant></member>
    <member><constant>PDO::PGSQL_ATTR_DISABLE_PREPARES</constant> => <constant>Pdo\Pgsql::ATTR_DISABLE_PREPARES</constant></member>
    <member><constant>PDO::SQLITE_ATTR_EXTENDED_RESULT_CODES</constant> => <constant>Pdo\Sqlite::ATTR_EXTENDED_RESULT_CODES</constant></member>
    <member><constant>PDO::SQLITE_ATTR_OPEN_FLAGS</constant> => <constant>Pdo\Sqlite::OPEN_FLAGS</constant></member>
    <member><constant>PDO::SQLITE_ATTR_READONLY_STATEMENT</constant> => <constant>Pdo\Sqlite::ATTR_READONLY_STATEMENT</constant></member>
    <member><constant>PDO::SQLITE_DETERMINISTIC</constant> => <constant>Pdo\Sqlite::DETERMINISTIC</constant></member>
    <member><constant>PDO::SQLITE_OPEN_READONLY</constant> => <constant>Pdo\Sqlite::OPEN_READONLY</constant></member>
    <member><constant>PDO::SQLITE_OPEN_READWRITE</constant> => <constant>Pdo\Sqlite::OPEN_READWRITE</constant></member>
    <member><constant>PDO::SQLITE_OPEN_CREATE</constant> => <constant>Pdo\Sqlite::OPEN_CREATE</constant></member>
   </simplelist>
  </para>

  <para>
   Методы, специфичные для драйвера, в классе PDO объявлены устаревшими.
   Список затронутых методов и их замены:

   <simplelist>
    <member><methodname>PDO::pgsqlCopyFromArray</methodname> => <methodname>Pdo\Pgsql::copyFromArray</methodname></member>
    <member><methodname>PDO::pgsqlCopyFromFile</methodname> => <methodname>Pdo\Pgsql::copyFromFile</methodname></member>
    <member><methodname>PDO::pgsqlCopyToArray</methodname> => <methodname>Pdo\Pgsql::copyToArray</methodname></member>
    <member><methodname>PDO::pgsqlCopyToFile</methodname> => <methodname>Pdo\Pgsql::copyToFile</methodname></member>
    <member><methodname>PDO::pgsqlGetNotify</methodname> => <methodname>Pdo\Pgsql::getNotify</methodname></member>
    <member><methodname>PDO::pgsqlGetPid</methodname> => <methodname>Pdo\Pgsql::getPid</methodname></member>
    <member><methodname>PDO::pgsqlLOBCreate</methodname> => <methodname>Pdo\Pgsql::lobCreate</methodname></member>
    <member><methodname>PDO::pgsqlLOBOpen</methodname> => <methodname>Pdo\Pgsql::lobOpen</methodname></member>
    <member><methodname>PDO::pgsqlLOBUnlink</methodname> => <methodname>Pdo\Pgsql::lobUnlink</methodname></member>
    <member><methodname>PDO::sqliteCreateAggregate</methodname> => <methodname>Pdo\Sqlite::createAggregate</methodname></member>
    <member><methodname>PDO::sqliteCreateCollation</methodname> => <methodname>Pdo\Sqlite::createCollation</methodname></member>
    <member><methodname>PDO::sqliteCreateFunction</methodname> => <methodname>Pdo\Sqlite::createFunction</methodname></member>
   </simplelist>
  </para>

 </sect2>

 <sect2 xml:id="migration85.deprecated.pdo-pgsql">
  <title>Драйвер PDO_PGSQL</title>

  <para>
   Константы, связанные с состояниями транзакций, объявлены устаревшими, поскольку функция недоступна в PDO:

   <simplelist>
    <member><constant>PDO::PGSQL_TRANSACTION_IDLE</constant></member>
    <member><constant>PDO::PGSQL_TRANSACTION_ACTIVE</constant></member>
    <member><constant>PDO::PGSQL_TRANSACTION_INTRANS</constant></member>
    <member><constant>PDO::PGSQL_TRANSACTION_INERROR</constant></member>
    <member><constant>PDO::PGSQL_TRANSACTION_UNKNOWN</constant></member>
   </simplelist>
  </para>

 </sect2>

 <sect2 xml:id="migration85.deprecated.reflection">
  <title>Модуль интроспекции кода Reflection</title>

  <simpara>
   Методы <code>setAccessible()</code> различных объектов Reflection устарели,
   поскольку они больше не имеют значения.
  </simpara>

  <simpara>
   Вызов метода <methodname>ReflectionClass::getConstant</methodname> для констант,
   которые не существуют, больше не поддерживается.
  </simpara>

  <simpara>
   Вызов метода <methodname>ReflectionProperty::getDefaultValue</methodname>
   для свойств без значений по умолчанию больше не поддерживается.
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.deprecated.spl">
  <title>Стандартная библиотека PHP (SPL)</title>

  <simpara>
   Отмена регистрации всех автозагрузчиков путём передачи функции <function>spl_autoload_call</function>
   в качестве callback-аргумента функции <function>spl_autoload_unregister</function> больше не поддерживается.
   Вместо этого, если это необходимо, следует пройтись по возвращаемому значению функции <function>spl_autoload_functions</function>
   и вызвать функцию <function>spl_autoload_unregister</function> для каждого значения.
  </simpara>

  <simpara>
   Методы <methodname>SplObjectStorage::contains</methodname>,
   <methodname>SplObjectStorage::attach</methodname> и
   <methodname>SplObjectStorage::detach</methodname> были признаны устаревшими
   и заменены на <methodname>SplObjectStorage::offsetExists</methodname>,
   <methodname>SplObjectStorage::offsetSet</methodname> и
   <methodname>SplObjectStorage::offsetUnset</methodname> соответственно.
  </simpara>

  <simpara>
   Использование классов <classname>ArrayObject</classname> и
   <classname>ArrayIterator</classname> с объектами больше не поддерживается.
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.deprecated.standard">
  <title>Стандартные модули</title>

  <simpara>
   Функция-псевдоним <function>socket_set_timeout</function> больше не поддерживается.
   Вместо неё используйте функцию <function>stream_set_timeout</function>.
  </simpara>

  <simpara>
   Передача &null; функциям <function>readdir</function>, <function>rewinddir</function>
   и <function>closedir</function> для использования последнего открытого каталога
   больше не поддерживается.
   Вместо этого явно укажите последний открытый каталог.
  </simpara>

  <simpara>
   Передача целых чисел за пределами интервала <literal>[0, 255]</literal>
   функции <function>chr</function> теперь не рекомендуется.
   Это связано с тем, что байт может содержать только значение в пределах этого интервала.
  </simpara>

  <simpara>
   Передача строки, которая не является однобайтовой функции <function>ord</function>
   устарела, это указывает на наличие ошибки.
  </simpara>

  <simpara>
   Локально предопределенная переменная
   <link linkend="reserved.variables.httpresponseheader">$http_response_header</link>
   устарела. Вместо этого следует вызывать функцию
   <function>http_get_last_response_headers</function>.
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.deprecated.xml">
  <title>Модуль XML</title>

  <simpara>
   Функция <function>xml_parser_free</function> устарела,
   поскольку объекты <classname>XMLParser</classname> освобождаются автоматически.
  </simpara>

 </sect2>

</sect1>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
